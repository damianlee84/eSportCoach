<!DOCTYPE html>
<html lang="en">
  <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
        <title>Results</title>

        {% load static from staticfiles %}
        <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}" >
        <link rel="stylesheet" href="{% static 'css/bootstrap-theme.min.css' %}">
        <link rel="stylesheet" href="{% static 'css/simple-sidebar.css' %}">
    </head>

    <body>
        {% include "nav_bar.html" %}
        <!-- Sidebar -->
        <div id="sidebar-wrapper"  style="clear: both; float:left; top:50px">
          <form id="form_search" method="get" action="/sideapp/searchCoach">
            <ul class="sidebar-nav">
                <li class="sidebar-brand">
                    <a href="#">Tutor Search</a>
                </li>
                <li class="dropdown">
                    <select name="Server" id="Server"style="background-color:#222; color:White; border:none">
                        <option>Server</option>
                        <option>------</option>
                        <option>North America</option>
                        <option>Latin America</option>
                        <option>Asia</option>
                        <option>Europe</option>
                    </select>
                </li>
                <li class="dropdown">
                    <select id="Role"style="background-color:#222; color:White; border:none">
                        <option>Role</option>
                        <option>------</option>
                        <option>ADC</option>
                        <option>Support</option>
                        <option>Mid</option>
                        <option>Top</option>
                        <option>Jungle</option>
                    </select>
                </li>
                <li class="dropdown">
                    <select id="Champion"style="background-color:#222; color:White; border:none">
                        <option>Champion</option>
                        <option>------</option>
                        <option>Long List</option>
                        <option>Long List</option>
                        <option>Long List</option>
                        <option>Long List</option>
                        <option>Long List</option>
                    </select>
                </li>
                <li class="dropdown">
                    <select id="Ranking" style="background-color:#222; color:White; border:none">
                        <option>Rank</option>
                        <option>------</option>
                        <option>Challenger 1-5</option>
                        <option>Master 1-5</option>
                        <option>Diamond 1-5</option>
                        <option>Gold 1-5</option>
                        <option>Silver 1-5</option>
                        <option>Bronze 1-5</option>
                    </select>
                </li>

                <li style="position:relative"><a href="/sideapp/list_of_coaches">Search!</a></li>
                <input id="search" value="Search!" type="submit"/>
            </ul>
          </form>
        </div>
        <!-- /#sidebar-wrapper -->

        <div id="wrapper">
            <!-- Page Content -->
            <div id="page-content-wrapper">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-lg-12" style="top:20px">
                            <h1>Results</h1>

                            <table class ="table table-striped">
                                <thead>
                                    <tr class ="stuff">
                                        <!--  <th class ="leader-name">Rank</th> -->
                                        <th class ="leader-name">Coach</th>
                                            <th>MMR</th>
                                            <th>Server</th>
                                            <th>Heroes</th>
                                            <th class="col-md-1">Rating</th>
                                            <th>Reputation</th>
                                            <th>Students</th>
                                            <th>Price/hr($)</th>
                                    </tr>
                                </thead>

                                <div id="test2">
                                <tbody style = "font-size:16px" id="test">
                                    {% if coaches %}
                                        {% for coach in coaches %}
                                            <tr onclick="window.location.href='/sideapp/tutorselected/{{coach.0}}'" style="cursor: pointer;">
                                                {% for attribute in coach %}
                                                    {% if forloop.counter != 8 %}
                                                        <td>{{attribute}}</td>
                                                    {% endif %}
                                                {% endfor %}
                                            </tr>
                                        {% endfor %}
                                    {% else %}
                                        <p>No coaches available.</p>
                                    {% endif %}
                                </tbody>
                              </div>
                            </table>

                        </div>
                    </div>
                </div>
            </div>
        </div>
        <form id="form_test" method="get" action="/sideapp/tutorselected">
        </form>

        <!-- jQuery -->
        <script src="{% static 'dajax/jquery.dajax.core.js' %}" type="text/javascript"></script>
        <script src="{% static 'js/jquery.js' %}" type="text/javascript"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
        <script src="{% static 'jquery-2.1.0.min.js' %}"></script>
        <!-- Bootstrap Core JavaScript -->
        <script src="{% static 'js/bootstrap.min.js' %}" type="text/javascript"></script>

        <script>
            $("#menu-toggle").click(function() {
            $("#wrapper").toggleClass("toggled");
            });
        </script>
        <script type="text/javascript">
        function calculate(){
          alert("testing!")
          Dajaxice.examples.multiply(Dajax.process,{'a':$('#a').val(),'b':$('#b').val()})
        }
        </script>

        <script>
            $(function() {
                var form = $('#form_search');                   // Get the form.

                $(form).submit(function(event) {                // Set up an event listener for the contact form.
                    event.preventDefault();                     // Stop the browser from submitting the form.
                    var formData = $(form).serialize();         // Serialize the form data.
                    $.ajax({                                    // Submit the form using AJAX.
                        type: 'GET',
                        url: $(form).attr('action'),
                        data: formData,
                        dataType:'text',
                    })
                    .done(function(response) {
                        mmr = response
                        $('#test').html("<p>"+mmr+"</p>")
                    })
                    .fail(function(response) {
                        alert("Oops! An error occured sending your review.");
                    });
                });
            });
        </script>

    </body>
</html>
