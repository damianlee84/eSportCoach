<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Esports Coach</title>
        <meta name="description" content=""esports coach>

        {% load static from staticfiles %}
        <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}" >
        <link rel="stylesheet" href="{% static 'css/bootstrap-theme.min.css' %}">
        <link rel="stylesheet" href="{% static 'css/bootstrap_datepicker.css' %}" >
        <link rel="stylesheet" href="{% static 'css/datepicker.css' %}">
    </head>

    <body>
        <!-- NavBar -->
        {% include "nav_bar.html" %}

        <!-- jumbotron -->
        <div class="jumbotron">
            <div class="container text-center">
                <br>
                <h1>Connect with Coach</h1><br>
                <p>A step closer to play like a PRO</p>
            </div>
        </div>

        <!-- Tutor Info Panel -->
        <div class="panel panel-default" style="margin-right:15%; margin-left:15%;">
            <h2 align="center">Coach {{ coach.full_name }}</h2>
            <div class="row promo-top" style="margin-right:5%; margin:0% 5% 3% 5%;">
                <div class="col-xs-0 col-sm-3 text-right">
                    <img src="{% static 'pictures/coach_icon1.jpg' %}" style="border-radius:100px;">
                </div>
                <div class="col-xs-12 col-sm-2 text-center" style="padding-right:0%; padding-left:0%;">
                    <br>
                    <div><a onclick="">Reputation:</a>
                        <div>{{ coach.reputation }}</div>
                        <div>top #% of coaches</div>
                        <div>
                            <a onclick="">Reviews:</a><br>
                            <span>{{ final_avg_review }}</span>/5
                            <p id="finalRating"></p>
                        </div>
                    </div>
                </div>
                <div class="col-xs-12 col-sm-2 text-right" style="width:140px; font-weight:bold;">
                    <br>
                    <div>MMR</div>
                    <div>Server</div>
                    <div>Cost</div>
                    <div>Hours Coached</div>
                    <div>Steam Name</div>
                    <div>Skype Name</div>
                </div>
                <div class="col-xs-12 col-sm-2 text-left" style="padding:0; width:135px;">
                    <br>
                    <div>{{ coach.mmr }}</div>
                    <div>{{ coach.server }}</div>
                    <div>${{ coach.pricerate }} USD/hr</div>
                    <div></div>
                    <div></div>
                    <div></div>
                </div>
                <div class="col-xs-12 col-sm-2 text-center" style="padding:0; width:135px;">
                    <br>
                    <div><img src="{% static 'pictures/email_icon.jpg' %}" height="50" width="50"></div>
                    <div>Email Coach </div>
                    <div><i class='glyphicon glyphicon-star' style="font-size:50px;"></i></div>
                    <div>Rate Coach</div>
                </div>
            </div>
        </div>

        <!-- Tutor Description Panel -->
        <div class="panel panel-default" style="margin-right:15%; margin-left:15%;" align="center">
            <div id="content" class="panel-body" style="margin-right:2%; margin-left:2%; text-align:left">
                <ul id="tabs" class="nav nav-tabs" data-tabs="tabs">
                    <li class="active"><a href="#overview" data-toggle="tab">Overview</a></li>
                    <li><a href="#cost" data-toggle="tab">Cost</a></li>
                    <li><a href="#reviews" data-toggle="tab">Reviews</a></li>
                    <li><a href="#reputation" data-toggle="tab">Reputation</a></li>
                    <li><a href="#contact_coach" data-toggle="tab">Contact Coach</a></li>
                </ul>
                <div id="my-tab-content" class="tab-content">
                    <div class="tab-pane active" id="overview">
                        <br>
                        <h4>Who Am I?</h4>
                        <p>My name is John and I am 22 year old coming from Russia. So student with a lot of free time for League and huge passion for the game.I mean I've been playing it back then in 2005 up until now ( with some minor breaks coz of school) so, 10 years, huh? Gotta mean smth.</p><br>
                        <h4>Why Me?</h4>
                        <p>Like I said, 10 years so far. Oh man, long time ago, some of the leagues/communities I was a member of, to name a few, most important ones - LofL, eld, league.pride, etc. To the most of u guys this doesnt mean anything but to explain, at these places u were playing on a regular basis with professional players (Dota1 versions of NEL but so much better), which is like 70 % ( rough estimation ) of Europe professional scene nowadays. Was top100 europe mmr leaderboards, right now around 6.3k ~ , adding to that, experience from various online amateur/semi professional tournaments (latest, worth mentioning is a quaterfinal of Gigabyte Challenge 12), constantly playing in 2nd divison of JoinedLegend League last couple of seasons with team ChL and also back then in League of Legends it was called pick-league, finishing top3 at majority of LANs I participated with my team in my country, countless hours of scrimming with my team with some of the best teams in Europe, its safe to say I have decent, to say the least, amount of skill and have gathered more than enough of game understanding and experience to be able to teach a few tricks some of you guys :)
                        http://www.leaguebuff.com/players/40518174 (league profile )</p><br>
                        <h4>Objective</h4>
                        <p>My goal as a coach is to make sure that you are able to become the best possible player you can be and this means teaching you how league is supposed to be played in theory and how to actually go out onto the rift.
                        Most players come here because they have hit a rough patch, but it does not mean they do not already know how to play the game. We will work primarily on eliminating factors in your gameplay that cause you to lose as well as expanding upon your overall game knowledge so that you can recognize these mistakes before they even happen.
                        Note: Remember that 90% of games are won by proper decision making as opposed to having insane mechanics.</p>
                    </div>
                    <div class="tab-pane" id="cost">
                        <br>
                        <p>Pricing is as follows:<br><br>
                           1-2hrs $25 per hour<br>
                           3hrs $65<br>
                           4hrs $90<br>
                           6hrs $125<br>
                           If you purchase 5 hours, I will add 1 FREE hour of coaching. 6hrs for the price of 5!<br><br>
                           If you wish to talk to me privately, are interested, or have any questions contact me! Message me using this website. Adding me in game is not the best way to contact me as I get flooded with friend requests but feel free to after we have spoken.</p>
                    </div>
                    <div class="tab-pane" id="reviews">
                            <h4>Rate Coach {{ coach.full_name }}</h4>
                            <form id="form_review" method="get" action="/sideapp/reviewcoach/">
                                <div class="form-inline">
                                    <div class="form-group">
                                        <span style="font-size:20px;"><input type="number" name="coachRatingStars" id="ratingSkill" class="rating"/></span>
                                    </div>
                                    <div class="form-group">Skill</div>        
                                </div>
                                <div class="form-inline">
                                    <div class="form-group">
                                        <span style="font-size:20px;"><input type="number" name="coachRatingStars" id="ratingCommunication" class="rating"/></span>
                                    </div>
                                    <div class="form-group">Communication</div> 
                                </div>
                                <div class="form-inline">
                                    <div class="form-group">
                                        <span style="font-size:20px;"><input type="number" name="coachRatingStars" id="ratingHelpfulness" class="rating"/></span>
                                    </div>
                                    <div class="form-group">Helpfulness</div> 
                                </div>
                                <br>
                                 <!-- Textarea for addition comments or questions -->
                                <textarea id="textarea_review" name="textarea_review" class="form-control" maxlength="300" placeholder="Write your honest review (max: 300 chars)..."></textarea>
                                <button id="submitButton" type="submit" class="btn btn-default">Submit</button>
                            </form>
                            <div id="form_review_messages"></div>
                    </div>
                    <div class="tab-pane" id="reputation">
                        <h1>Green</h1>
                        <p>green green green green green</p>
                    </div>
                    <div class="tab-pane" id="contact_coach">
                        <h1>Blue</h1>
                        <p>blue blue blue blue blues</p>
                    </div>
                </div>
            </div>
        </div>



        <!-- Info Panel -->
        <div class="panel panel-default" style="margin-right:15%; margin-left:15%;" align="center">
            <div class="panel-body">
                <!-- Date and hour pickers Div -->
                <div style="margin-right:24%; margin-left:24%;">
                    <!-- Datepicker -->
                    <div class="input-append date" id="dp3" data-date="10-29-2015" data-date-format="mm-dd-yyyy">
                        <input class="span2" size="16" type="text" placeholder="Select a Date" readonly="" style="background-color:white; width:100px; height:28px;">
                        <span class="add-on" style="height: 28px; margin-right:25px"><i class="glyphicon glyphicon-calendar"></i></span>
                    </div>

                    <!-- Hourpicker -->
                    <select class="dropdown" style="width:80px">
                        <option value="hour">Hour</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                        <option value="10">10</option>
                        <option value="11">11</option>
                        <option value="12">12</option>
                    </select> :

                    <!-- MinutePicker -->
                    <select class="dropdown" style="width:80px">
                        <option value="minute">Minute</option>
                        <option value="00">00</option>
                        <option value="15">15</option>
                        <option value="30">30</option>
                        <option value="45">45</option>
                    </select>

                    <!-- AM/PM -->
                    <select class="dropdown" style="width:60px">
                        <option value="am">AM</option>
                        <option value="pm">PM</option>
                    </select>
                </div>

                <!-- Textinput for Skype and TwitchTV accounts -->
                <div style="margin-right:24%; margin-left:24%;">
                    <div class="input-group">
                      <span class="input-group-addon">
                        <input type="checkbox" aria-label="...">
                      </span>
                      <input type="text" class="form-control" aria-label="..." placeholder="Skype account" style="height:28px;">
                    </div>
                    <div class="input-group">
                      <span class="input-group-addon">
                        <input type="checkbox" aria-label="...">
                      </span>
                      <input type="text" class="form-control" aria-label="..." placeholder="Twitch account" style="height: 28px">
                    </div>
                </div>
                <br>

                <!-- Textarea for addition comments or questions -->
                <div style="margin-right:24%; margin-left:24%;">
                    <textarea id="request_comment" name="data" class="form-control" maxlength="100" placeholder="Comments or addition requests (max: 100 chars)..."></textarea>
                </div>
            </div>
        </div>

        <!-- Payment Method Panel -->
        <div class="panel panel-default" style="margin-right:15%; margin-left:15%;" align="center">
            <div class="panel-body">
                <span style="color:solid grey">Payment Method options</span>
                <br><br>
                <a href="/sideapp/paymentpage/{{coach.id}}" ><img src="https://www.paypalobjects.com/webstatic/en_US/i/buttons/cc-badges-ppmcvdam.png" alt="Buy now with PayPal" /></a>
            </div>
        </div>



        <!-- BELOW ARE ALL THE SCRIPTS -->

        <!-- Script for the average rating stars -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
        <script src="{% static 'jquery-2.1.0.min.js' %}"></script>
        <script src="{% static 'js/bootstrap-rating-input.min.js' %}"></script>
        <script src="{% static 'js/bootstrap.min.js' %}"></script>

        <script>
            $(function() {
                var form = $('#form_review');                   // Get the form.
                var formMessages = $('#form_review_messages');  // Get the messages div.

                $(form).submit(function(event) {                // Set up an event listener for the contact form.
                    event.preventDefault();                     // Stop the browser from submitting the form.
                    var formData = $(form).serialize();         // Serialize the form data.
                    $.ajax({                                    // Submit the form using AJAX.
                        type: 'GET',
                        url: $(form).attr('action'),
                        data: formData,
                        dataType:'text',
                    })
                    .done(function(response) {
                        if (response == "Key Error"){
                            alert("Key Error when sending review");
                        }
                        else{
                            alert("Thanks for your honest review!");
                            $('#textarea_review').val('');        // Clear the form.     
                        }                   
                    })
                    .fail(function(response) {
                        alert("Oops! An error occured sending your review.");
                    });
                });
            });
        </script>
               
        <script>
            $(function (){
                document.getElementById("finalRating").innerHTML = calcAvgStars({{ final_avg_review }});
            });

            function calcAvgStars(final_avg_review){
                temp = "";
                for (i = 0; i < final_avg_review; i++) {
                    temp += "<i class='glyphicon glyphicon-star' style='font-size:20px;'></i>";
                }
                for (i = final_avg_review; i < 5; i++) {
                    temp += "<i class='glyphicon glyphicon-star-empty' style='font-size:20px;'></i>";
                }
                return temp;
            }
        </script>


        <!-- Script for the tutor description tabs -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
        <script src="{% static 'js/bootstrap.min.js' %}"></script>
        <script type="text/javascript">
            $(document).ready(function () {
                    $('#myTab a').click(function (e) {
                        e.preventDefault()
                        $(this).tab('show')
                    })
                    $('a[data-toggle="tab"]').on('shown.bs.tab', function (e) {
                        e.relatedTarget // previous tab
                    });
                });
        </script>

        <!-- Scripts for the calendar -->
        <script src="{% static 'js/jquery.js' %}"></script>
        <script src="{% static 'js/bootstrap-datepicker.js' %}"></script>
        <script>
            if (top.location != location) {
            top.location.href = document.location.href ;
            }
            $(function(){
                window.prettyPrint && prettyPrint();
                $('#dp1').datepicker({
                    format: 'mm-dd-yyyy'
                });
                $('#dp2').datepicker();
                $('#dp3').datepicker();
                $('#dp3').datepicker();
                $('#dpYears').datepicker();
                $('#dpMonths').datepicker();

                var startDate = new Date(2012,1,20);
                var endDate = new Date(2012,1,25);
                $('#dp4').datepicker()
                    .on('changeDate', function(ev){
                        if (ev.date.valueOf() > endDate.valueOf()){
                            $('#alert').show().find('strong').text('The start date can not be greater then the end date');
                        } else {
                            $('#alert').hide();
                            startDate = new Date(ev.date);
                            $('#startDate').text($('#dp4').data('date'));
                        }
                        $('#dp4').datepicker('hide');
                    });
                $('#dp5').datepicker()
                    .on('changeDate', function(ev){
                        if (ev.date.valueOf() < startDate.valueOf()){
                            $('#alert').show().find('strong').text('The end date can not be less then the start date');
                        } else {
                            $('#alert').hide();
                            endDate = new Date(ev.date);
                            $('#endDate').text($('#dp5').data('date'));
                        }
                        $('#dp5').datepicker('hide');
                    });

                // disabling dates
                var nowTemp = new Date();
                var now = new Date(nowTemp.getFullYear(), nowTemp.getMonth(), nowTemp.getDate(), 0, 0, 0, 0);

                var checkin = $('#dpd1').datepicker({
                  onRender: function(date) {
                    return date.valueOf() < now.valueOf() ? 'disabled' : '';
                  }
                }).on('changeDate', function(ev) {
                    if (ev.date.valueOf() > checkout.date.valueOf()) {
                        var newDate = new Date(ev.date)
                        newDate.setDate(newDate.getDate() + 1);
                        checkout.setValue(newDate);
                    }
                    checkin.hide();
                    $('#dpd2')[0].focus();
                }).data('datepicker');
                var checkout = $('#dpd2').datepicker({
                    onRender: function(date) {
                    return date.valueOf() <= checkin.date.valueOf() ? 'disabled' : '';
                    }
                }).on('changeDate', function(ev) {
                    checkout.hide();
                }).data('datepicker');
            });
        </script>
        <script src="{% static 'js/urchin.js' %}" type="text/javascript"></script>
        <script type="text/javascript">
            _uacct = "UA-106117-1";
            urchinTracker();
        </script>
    </body>
</html>
